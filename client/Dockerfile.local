# client/Dockerfile.local
FROM node:22-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
ARG VITE_API_BASE_URL=/api
ENV VITE_API_BASE_URL=${VITE_API_BASE_URL}
RUN npm run build

FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
# optional: if you want THIS container to also proxy /api, drop a prod conf:
# COPY client/nginx/nginx-prod.conf /etc/nginx/conf.d/default.conf
EXPOSE 80
